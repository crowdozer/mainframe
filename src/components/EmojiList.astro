---
import clsx from 'clsx'

interface Props {
	emoji: string
	ulClasses?: string
}

const { emoji, ulClasses = '' } = Astro.props

// generate a random ID so we can do some scoped css
const id = `emoji-list-${crypto.randomUUID()}`
---

<emoji-list data-emoji={emoji} data-id={id}>
	<ul {id} class={clsx(id, ulClasses)}>
		<slot />
	</ul>
</emoji-list>

<script>
	import connect from './EmojiList'

	class EmojiList extends HTMLElement {
		constructor() {
			super()

			const emoji = this.dataset.emoji
			const id = this.dataset.id
			if (id && emoji) {
				connect(id, emoji)
			}
		}
	}

	customElements.define('emoji-list', EmojiList)
</script>
