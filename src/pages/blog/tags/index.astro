---
import { getCollection } from 'astro:content'
import Card from '@c/Card.astro'
import EmojiList from '@c/EmojiList.astro'
import Structured from '@/layouts/Structured.astro'

const allPosts = await getCollection('blog')
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())]
---

<Structured title="tags">
	<Card padding="p-4 px-6">
		<div class="space-y-4">
			<h3>Tag index</h3>
			<p>filter blog posts by category</p>
			<EmojiList emoji="ðŸ”–">
				{
					tags.map((tag) => (
						<li>
							<a href={`/blog/tags/${tag}`}>{tag}</a>
						</li>
					))
				}
			</EmojiList>
			<div class="flex flex-row gap-2">
				<a href="/blog">all posts</a>
				<a href="/blog/tags">all tags</a>
			</div>
		</div>
	</Card>
</Structured>
